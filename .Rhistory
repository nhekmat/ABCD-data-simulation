install.packages("ggplot2")
install.packages("tidyverse")
install.packages("topicmodels")
install.packages("tm")
install.packages("quanteda")
knitr::opts_chunk$set(echo = TRUE)
library(topicmodels)
library(tm)
data("AssociatedPress")
inspect(AssociatedPress[1:5, 1:5])
aptopicmodel<-LDA(AssociatedPress,
k=10,
control = list(seed = 321))
library(topicmodels)
library(tm)
data("AssociatedPress")
inspect(AssociatedPress[1:5, 1:5])
aptopicmodel<-LDA(AssociatedPress,
k=10,
control = list(seed = 321))
3+1+1+1+2+1+5+6+4+4+2+4+1
9/35
35-9
26/35
27/35
26/35
28/35
install.packages("effectsize")
install.packages("pwr")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
library(lme4)
library(tidyverse)
library(ggplot2)
library(broom)
library(dplyr)
library(dotwhisker)
abcd= read.csv("simulated_data_with_days_above_90.csv")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
library(lme4)
library(tidyverse)
library(ggplot2)
library(broom)
library(dplyr)
library(dotwhisker)
abcd= read.csv("simulated_data_with_days_above_90.csv")
setwd("~/Documents/GitHub/ABCD-data-simulation")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
library(lme4)
library(tidyverse)
library(ggplot2)
library(broom)
library(dplyr)
library(dotwhisker)
abcd= read.csv("simulated_data_with_days_above_90.csv")
# Chunk 2
model_1 <- lm(mh_p_cbcl__synd__ext_sum ~ le_l_adi_addr1_national_prcnt +
sdev_y_ders_total +
mh_y_upps_pers_sum+
sex+
Days_Above_90+
le_l_coi_addr1_coi_total_national_score+
le_l_svi_addr1_total_prcntile+
mh_y_upps_nurg_sum, data = abcd)
# Chunk 3
summary(model_1)
# Chunk 4
dwplot(model_1,
dot_args = list(color = "blue", size = 2.5),
whisker_args = list(color="blue",size = 1)) %>%
relabel_predictors(c(
"(Intercept)" = "Intercept",
"le_l_adi_addr1_national_prcnt" = "Area Deprivation Index (%)",
"sdev_y_ders_total" = "DERS Total Score",
"mh_y_upps_pers_sum" = "UPPS-P Perseverance",
"sex" = "Sex",
"Days_Above_90" = "Days Above 90°F",
"le_l_coi_addr1_coi_total_national_score" = "COI Total Score",
"le_l_svi_addr1_total_prcntile" = "SVI Percentile",
"mh_y_upps_nurg_sum" = "UPPS-P Negative Urgency"
)) +
geom_vline(xintercept = 0, colour = "red", linetype = 2, linewidth = 1) +
ggtitle(str_wrap("Dot Whisker Plot of Coefficients for Model 1 (No Moderator)", width =35)) +
xlab("Coefficient Estimates") +
ylab("Covariates") +
theme_bw()+
theme(plot.title = element_text(hjust = 0.5))
# Chunk 5
model_2 <- lm(mh_p_cbcl__synd__ext_sum ~ le_l_adi_addr1_national_prcnt*Days_Above_90 +
sdev_y_ders_total *Days_Above_90 +
mh_y_upps_pers_sum*Days_Above_90 +
sex*Days_Above_90+
le_l_coi_addr1_coi_total_national_score*Days_Above_90 +
le_l_svi_addr1_total_prcntile*Days_Above_90 +
mh_y_upps_nurg_sum*Days_Above_90 , data = abcd)
# Chunk 6
summary(model_2)
# Chunk 7
interaction <- tidy(model_2) %>% filter(str_detect(term, ":"))
dwplot(interaction,
dot_args = list(color = "blue", size = 3),
whisker_args = list(color = "blue", size = 1.5)) %>%
relabel_predictors(c(
"le_l_adi_addr1_national_prcnt:Days_Above_90" = "ADI × Heat",
"Days_Above_90:sdev_y_ders_total" = "DERS × Heat",
"Days_Above_90:mh_y_upps_pers_sum" = "Perseverance × Heat",
"Days_Above_90:sex" = "Sex × Heat",
"Days_Above_90:le_l_coi_addr1_coi_total_national_score" = "COI × Heat",
"Days_Above_90:le_l_svi_addr1_total_prcntile" = "SVI × Heat",
"Days_Above_90:mh_y_upps_nurg_sum" = "Negative Urgency × Heat"
)) +
geom_vline(xintercept = 0, colour = "red", linetype = 2, linewidth = 1) +
ggtitle(str_wrap("Dot Whisker Plot of Coefficients for Model 2 (With Moderator)", width = 35)) +
xlab("Coefficient Estimates") +
ylab("Covariates") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
# Chunk 8
#R2
r2model1 = summary(model_1)$r.squared
r2model2 = summary(model_2)$r.squared
# adj R2
r2adjmodel1 = summary(model_1)$adj.r.squared
r2adjmodel2 = summary(model_2)$adj.r.squared
# data frame for comparison
df = data.frame(
Models = c("Dot Whisker Plot of Coefficients for Model 2 (Moderator)"),
R2 = c(r2model1, r2model2),
AdjustedR2= c(r2adjmodel1, r2adjmodel2)
)
print(df)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
library(lme4)
library(tidyverse)
library(ggplot2)
library(broom)
library(dplyr)
library(dotwhisker)
abcd= read.csv("simulated_data_with_days_above_90.csv")
# Chunk 2
model_1 <- lm(mh_p_cbcl__synd__ext_sum ~ le_l_adi_addr1_national_prcnt +
sdev_y_ders_total +
mh_y_upps_pers_sum+
sex+
Days_Above_90+
le_l_coi_addr1_coi_total_national_score+
le_l_svi_addr1_total_prcntile+
mh_y_upps_nurg_sum, data = abcd)
# Chunk 3
summary(model_1)
# Chunk 4
dwplot(model_1,
dot_args = list(color = "blue", size = 2.5),
whisker_args = list(color="blue",size = 1)) %>%
relabel_predictors(c(
"(Intercept)" = "Intercept",
"le_l_adi_addr1_national_prcnt" = "Area Deprivation Index (%)",
"sdev_y_ders_total" = "DERS Total Score",
"mh_y_upps_pers_sum" = "UPPS-P Perseverance",
"sex" = "Sex",
"Days_Above_90" = "Days Above 90°F",
"le_l_coi_addr1_coi_total_national_score" = "COI Total Score",
"le_l_svi_addr1_total_prcntile" = "SVI Percentile",
"mh_y_upps_nurg_sum" = "UPPS-P Negative Urgency"
)) +
geom_vline(xintercept = 0, colour = "red", linetype = 2, linewidth = 1) +
ggtitle(str_wrap("Dot Whisker Plot of Coefficients for Model 1 (No Moderator)", width =35)) +
xlab("Coefficient Estimates") +
ylab("Covariates") +
theme_bw()+
theme(plot.title = element_text(hjust = 0.5))
# Chunk 5
model_2 <- lm(mh_p_cbcl__synd__ext_sum ~ le_l_adi_addr1_national_prcnt*Days_Above_90 +
sdev_y_ders_total *Days_Above_90 +
mh_y_upps_pers_sum*Days_Above_90 +
sex*Days_Above_90+
le_l_coi_addr1_coi_total_national_score*Days_Above_90 +
le_l_svi_addr1_total_prcntile*Days_Above_90 +
mh_y_upps_nurg_sum*Days_Above_90 , data = abcd)
# Chunk 6
summary(model_2)
# Chunk 7
interaction <- tidy(model_2) %>% filter(str_detect(term, ":"))
dwplot(interaction,
dot_args = list(color = "blue", size = 3),
whisker_args = list(color = "blue", size = 1.5)) %>%
relabel_predictors(c(
"le_l_adi_addr1_national_prcnt:Days_Above_90" = "ADI × Heat",
"Days_Above_90:sdev_y_ders_total" = "DERS × Heat",
"Days_Above_90:mh_y_upps_pers_sum" = "Perseverance × Heat",
"Days_Above_90:sex" = "Sex × Heat",
"Days_Above_90:le_l_coi_addr1_coi_total_national_score" = "COI × Heat",
"Days_Above_90:le_l_svi_addr1_total_prcntile" = "SVI × Heat",
"Days_Above_90:mh_y_upps_nurg_sum" = "Negative Urgency × Heat"
)) +
geom_vline(xintercept = 0, colour = "red", linetype = 2, linewidth = 1) +
ggtitle(str_wrap("Dot Whisker Plot of Coefficients for Model 2 (With Moderator)", width = 35)) +
xlab("Coefficient Estimates") +
ylab("Covariates") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
# Chunk 8
#R2
r2model1 = summary(model_1)$r.squared
r2model2 = summary(model_2)$r.squared
# adj R2
r2adjmodel1 = summary(model_1)$adj.r.squared
r2adjmodel2 = summary(model_2)$adj.r.squared
# data frame for comparison
df = data.frame(
Models = c("Dot Whisker Plot of Coefficients for Model 2 (Moderator)"),
R2 = c(r2model1, r2model2),
AdjustedR2= c(r2adjmodel1, r2adjmodel2)
)
print(df)
library(effectsize)
library(pwr)
effectsize::eta_squared(model_1, partial = TRUE)
effectsize::standardize_parameters(model)  # standardized betas
library(effectsize)
library(pwr)
effectsize::eta_squared(model_1, partial = TRUE)
effectsize::standardize_parameters(model_1)  # standardized betas
effectsize::eta_squared(model_2, partial = TRUE)
effectsize::standardize_parameters(model_2)  # standardized betas
?effects
?effectsize
?eta_squared
effectsize::eta_squared(model_2, partial = TRUE)
eta_squared(model_2, partial = TRUE)
eta_squared(model_2, partial = TRUE)
standardize_parameters(model_2)  # standardized betas
